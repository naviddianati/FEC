<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>main</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        Module&nbsp;main
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module main</h1><p class="nomargin-top"><span class="codelink"><a href="main-pysrc.html">source&nbsp;code</a></span></p>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="main-module.html#DISAMBIGUATE_stage_1" class="summary-sig-name">DISAMBIGUATE_stage_1</a>()</span><br />
      Run <code class="link">disambiguate_main</code> for each state.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#DISAMBIGUATE_stage_1">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="main-module.html#DISAMBIGUATE_stage_2" class="summary-sig-name">DISAMBIGUATE_stage_2</a>()</span><br />
      Using results from state-level disambiguation, do a second run of 
      comparisons on a national level.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#DISAMBIGUATE_stage_2">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="main-module.html#INIT" class="summary-sig-name">INIT</a>()</span><br />
      Initialize.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#INIT">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="test_hashes"></a><span class="summary-sig-name">test_hashes</span>()</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#test_hashes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="test_view_vectors"></a><span class="summary-sig-name">test_view_vectors</span>(<span class="summary-sig-arg">state</span>=<span class="summary-sig-default">'delaware'</span>)</span><br />
      For a sample of records in state, print the normalized attributes and
      feature vector.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#test_view_vectors">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="test_memory1"></a><span class="summary-sig-name">test_memory1</span>()</span><br />
      load the USA 20-char hashes to see memory use.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#test_memory1">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="test_identity_manager1"></a><span class="summary-sig-name">test_identity_manager1</span>()</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#test_identity_manager1">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="test_identity_manager2"></a><span class="summary-sig-name">test_identity_manager2</span>()</span><br />
      Load identities and identity_adjacency and print out the connected 
      components of the inter-cluster network.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#test_identity_manager2">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="test_retriever_by_id"></a><span class="summary-sig-name">test_retriever_by_id</span>()</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="main-pysrc.html#test_retriever_by_id">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="DISAMBIGUATE_stage_1"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">DISAMBIGUATE_stage_1</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="main-pysrc.html#DISAMBIGUATE_stage_1">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Run <code class="link">disambiguate_main</code> for each state. The 
  main products will be the following:</p>
  <ul>
    <li>
      The preliminary identities inferred at the state level, stored in the
      &quot;identities&quot; MySQL table.
    </li>
    <li>
      The full match buffers of all states. These are lists of all record 
      pairs matched within each state.
    </li>
    <li>
      The near misses within each state. These can be used to revisit and 
      refine the clusters found, in the second round.
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="DISAMBIGUATE_stage_2"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">DISAMBIGUATE_stage_2</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="main-pysrc.html#DISAMBIGUATE_stage_2">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Using results from state-level disambiguation, do a second run of 
  comparisons on a national level. The goal is to match clusters across 
  states and even within states. To do this, we use the following data:</p>
  <ul>
    <li>
      coarse hashes computed for the entire country using the Tokenizer 
      class via <code class="link">INIT_compute_national_hashes</code>
    </li>
    <li>
      The match buffer of each state, used to avoid double-checking records
      that are already matched. That would be stupid.
    </li>
    <li>
      The set of near miss record pairs found for each state. These pairs 
      will be re- examined if they aren't clustered together already. The 
      point is that using the stage_1 identities, we now have access to new
      statistics that will let us assess the likelihood of these 
      near-misses actually being matches.
      <p>The steps are roughly as follows:</p>
    </li>
    <li>
      Using the uniform national hashes, find a list of similar record 
      pairs across the country. This list minus the match buffers from 
      stage 1 will be the pairs we will be comparing in this round.
    </li>
    <li>
      Figure out which &quot;identities&quot; these similar records belong 
      to and make a list of such pairs of identities that will need to be 
      compared.
    </li>
    <li>
      Divide these identity pairs into num_procs &quot;independent&quot; 
      sets of roughly equal sizes. For each set, load all the records 
      belonging to the identities it contains. Each one of these sets will 
      be sent to a child process for processing.
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="INIT"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">INIT</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="main-pysrc.html#INIT">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Initialize. Perform preliminary computations in preparation for the 
  stage1 and stage2 disambiguations. We compute a number of things and 
  export the resulting data to files. These files will be loaded later by 
  disambiguation methods.</p>
  <ul>
    <li>
      For each state, using the TokenizerNgram class, tokenize all records 
      from the specified state, save the tokendata as well as the feature 
      vectors to files. Then, compute the LSH hashes and save to file. This
      data will be used for the state-level (stage1) disambiguation where 
      candidate record pairs are selected based on hashes computed from 
      file-grained (Ngram) feature vectors.
    </li>
    <li>
      For each state, using the Tokenizer class, tokenize all records from 
      the specified state, save the tokendata as well as the feature 
      vectors to files. Then, compute the LSH hashes and save to file. This
      data will be used for the national (stage2) disambiguation where 
      candidate record pairs are selected based on hashes computed from 
      coarse-grained (word) feature vectors.
    </li>
    <li>
      Combine the Tokenizer tokendata and feature vectors of all states 
      into a national file to be used in stage2 disambiguation.
    </li>
    <li>
      Using the national Tokenizer tokendata and feature vectors, compute 
      new (and longer) hashes, uniformly for the entire country. This will 
      be used in stage2 to find candidate pairs at a national level.
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon May  9 16:41:53 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
